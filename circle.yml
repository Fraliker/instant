machine:
  node:
    version: 8.4.0

dependencies:
  pre:
    - npm install -g npm@latest
    - npm install -g @angular/cli
    - npm install -g angular-cli-ghpages

  override:
    - npm install
  
  cache_directories:
    - "node_modules"

deployment:
  staging:
    branch: master
    commands:
      - ng build --prod --base-href "https://zeit.js.org/instant/"
      - ngh --repo=https://GH_TOKEN@github.com/finnzeit/instant.git --name="finnzeit" --email=finnzeit@gmail.com